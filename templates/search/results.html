{% extends "base.html" %}
{% block content %}
<h1>Search</h1>
<form class="inline" method="get" action="{% url 'search' %}">
  <input type="search" name="q" placeholder="Search…" value="{{ q|default:'' }}">
  <select name="tag">
    <option value="">All tags</option>
    {% for t in tags %}<option value="{{ t.slug }}" {% if tag == t.slug %}selected{% endif %}>{{ t.name }}</option>{% endfor %}
  </select>
  <input type="text" name="year" inputmode="numeric" pattern="[0-9]*" placeholder="Year" value="{{ year|default:'' }}" style="width:90px">
  <button class="btn" type="submit">Go</button>
</form>

<ul class="grid auto" style="list-style:none; padding:0; margin-top:16px;">
  {% for ad in page.object_list %}
    <li class="card">
      <a href="{% url 'ad_detail' ad.pk %}" style="text-decoration:none;">
        <div class="thumb">
          {% if ad.youtube_id %}<img src="https://i.ytimg.com/vi/{{ ad.youtube_id }}/hqdefault.jpg" alt="">{% endif %}
        </div>
        <h3>{{ ad.title }}</h3>
      </a>
      <div class="meta">{{ ad.brand.name }}{% if ad.year %} • {{ ad.year }}{% endif %}{% if ad.agency %} • {{ ad.agency.name }}{% endif %}</div>
    </li>
  {% empty %}
    <p>No matching ads.</p>
  {% endfor %}
</ul>
{% include "partials/pagination.html" with page=page %}
{% endblock %}